---
title: Android Pentesting
desc: The Android Package with the file extension apk is the file format used by the Android operating system, and a number of other Android-based operating systems for distribution and installation of mobile apps, mobile games and middleware.
tags: [Android, APK, Dalvik, Malware, Mobile, Reverse, Smali]
alts: [Reverse-Engineering]
render_with_liquid: false
---

## Android Backup (.ab)

- **Extract**

    ```sh
    (printf "\x1f\x8b\x08\x00\x00\x00\x00\x00" ; tail -n +5 sample.ab) | tar -xvz
    ```

<br />

## APK Reverse Engineering

1. **Extract APK File**

    You can retrieve "classes.dex".

    ```sh
    unzip example.apk -d ./Example
    ```

    Now you can observe files.  
    For **React Native**, it may contain the sensitive information in the bundle file.

    ```sh
    strings assets/index.android.bundle
    ```

2. **Convert DEX to JAR**

    You can retrieve JAR file.

    ```sh
    d2j-dex2jar classes.dex
    ```

3. **Observation**

    **JD-GUI** is a JAVA decompiler tool. It reveals class in the JAR file.  
    Open JD-GUI.

    ```sh
    jd-gui
    ```

<br />

## Useful Tools

1. Apktool

    Decode APK file.

    ```sh
    apktool d example.apk -o ./example
    ```

2. Ghidra

    ```sh
    ghidra
    ```

<br />

## Dynamic Analysis

1. **Prerequisites**

    If you pentest on virtual devices, you need to install some emulator as below. 

    - **[Android Studio](https://developer.android.com/studio){:target="_blank"}**
    - **[Genymotion](https://www.genymotion.com/){:target="_blank"}**
    - **[Nox](https://www.bignox.com/){:target="_blank"}**