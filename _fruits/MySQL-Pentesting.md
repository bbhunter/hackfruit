---
title: MySQL Pentesting
desc: Default port is 3306.
tags: [3306, Database, Hydra, MariaDB, MySQL, PrivEsc, Privilege, SQL]
alts: []
render_with_liquid: false
---

## Enumeration

1. **Use Nmap**

    ```sh
    nmap --script mysql-info -p 3306 <target-ip>
    nmap --script mysql-enum -p 3306 <target-ip>
    nmap --script mysql-brute -p 3306 <target-ip>
    nmap --script mysql-databases -p 3306 <target-ip>
    nmap --script mysql-users -p 3306 <target-ip>
    nmap --script mysql-* -p 3306 <target-ip>
    ```

2. **Brute Force Credentials**

    ```sh
    hydra -l username -P passwords.txt <target-ip> mysql
    hydra -L usernames.txt -p password <target-ip> mysql
    ```

<br />

## Connect

**"mysql"** command may be  replaced with **"mariadb"** .

1. **Local**

    ```sh
    # No password
    mysql -u username

    # With Password
    mysql -u username -p

    # Specity database name
    mysql -u username -p database_name

    # Execute commands
    mysql -u username -p database_name -e "show databases;"
    echo '<password>' | mysql -u username -p database_name -e "show databases;"
    ```

2. **Remote**

    ```sh
    mysql -u username -p -h <target-ip> -P 3306

    # Without password (remove -p)
    mysql -u username -h <target-ip> -P 3306

    # Specify database (-D)
    mysql -u username -p -h <target-ip> -D database_name

    # Default credential (username: root, no password)
    mysql -u root -h <target-ip> -P 3306
    ```

<br />

## Commands

```sh
# Display databases
> show databases;

# Switch to the database
> use db_name;

# Display tables in the current database
> show tables;
# Display tables and table type
> show full tables;
# Display tables in the database
> show tables from db_name;
# Display tables which names start with 'user'
> show tables like 'user%';
# Display tables which names start with 'user' in the database
> show tables from db_name like 'user%';

# Display everything in the table
> select * from table_name;

# Create new table
> create table table_name(column_name column_type);
> create table table_name(user_id int, user_name varchar(40));

# Create an user-defined function
> create function func_name(param1, param2) returns datatype;
> create function new_fund(age integer) returns integer;

# Use a function
> select func_name(param1, param2);

# Insert new record to the table
> insert into table_name values(value1, value2);
```